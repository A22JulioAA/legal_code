{% extends "core/base.html" %} {% load static %} {% block title %}
Homepage {% endblock %} {% block css %}
<link rel="stylesheet" href="{% static 'css/homepage.css' %}" />
{% endblock %} {% block script %}
<script src="{% static 'js/script.js' %}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var myToast = new bootstrap.Toast(document.querySelector('.toast'));
    myToast.show();
  });
</script>
{% endblock %} {% block content %}

<!-- Un simple toast para advertir de que la página está en construcción -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div id="liveToast" class="toast" role="alert">
    <div class="toast-header">
      <img src="{% static 'img/alert.png' %}" width=50 class="rounded me-2" alt="Icono de alerta">
      <strong class="me-auto">Página en construcción</strong>
      <small>now</small>
      <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
    </div>
    <div class="toast-body">
      <strong><span class="text-danger">Página en contrucción!.</span></strong> Si se detecta cualquier error, ponerse
      en contacto: a22julioaa@iessanclemente.net
    </div>
  </div>
</div>

<!-- Inicio de la página, lo que se ve tan pronto se accede al homepage -->
<div id="inicio" class="container-fluid d-flex justify-content-center align-items-center text-center p-0">
  <!-- La función scrollToSection está definida en el script y sirve para desplazar
    la vista hasta la sección de especialidades, que es donde empiezan los filtros y ofertas -->
  <a href="" style="width: 50%" onclick="scrollToSection(event, 'especialidades')"
    class="border border-light border-2 text-light p-5 enlace_und">EMPEZAR A EXPLORAR</a>
</div>

<br />

<!-- En esta sección mostraremos los mensajes flash que vayan ocurriendo en diferentes puntos de la web -->

{% if messages %}
{% for message in messages %}
<section class="container-fluid text-center alert alert-{{ message.tags }}">
  {{ message }}
</section>
{% endfor %}
{% endif %}

<!-- Sección para filtros por especialidades y subespecialidades -->

<section id="especialidades" class="container border p-3">
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
      Selecciona una especialidad
    </button>
    <ul class="dropdown-menu">
      {% for especialidad in especialidades %}
      {% if especialidad.subespecialidades.exists %}
      <li><a class="dropdown-item" href="/especialidad/{{especialidad.id}}">{{especialidad | capfirst }}</a></li>
      {% endif %}
      {% endfor %}
    </ul>
  </div>
  {% if subespecialidades %}
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
      Selecciona una subespecialidad
    </button>
    <ul class="dropdown-menu">
      {% for subespecialidad in subespecialidades %}
      <li><a class="dropdown-item" href="/subespecialidad/{{subespecialidad.id}}">{{subespecialidad | capfirst }}</a>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
</section>

<!-- Sección de anuncios de profesionales ordenados de forma aleatoria en un principio -->

<!-- En esta sección se muestra un mensaje si no existen profesionales asociados a ese campo -->

{% if no_profesionales_especialidad %}
<section class="container mt-3 border-top">
  <h2>{{no_profesionales_especialidad}}</h2>
</section>
{% else %}

<!-- Lista de los profesionales(en un principio aleatorios, sin filtros) -->
<section class='seccion-profesionales container mt-3' id="seccion-profesionales">
  {% for profesional in lista_profesionales %}
  <div class='row mt-4'>
    <div class="col-12 col-lg-8 p-0">

      <div class="card row m-0 p-2" style="width: 100%;">
        <div class="row g-0">
          <div class="col-8">
            <div class="card-body">
              <h5 class="card-title">{{profesional.nombre | capfirst}} {{profesional.apellidos | capfirst}} |
                {{profesional.campo}}</h5>
              <p><i class="fa-solid fa-location-dot"></i> {{profesional.direccion}}</p>
              <hr class="border border-dark border-1 opacity-75">
              <p class="card-text">{{ profesional.descripcion }}</p>
              Especialidades:
              <ul class="list-group mb-3">
                {% for especialidad in profesional.especialidad.all %}
                <li class="list-group-item">{{especialidad.nombre | capfirst}}</li>
                {% endfor %}
              </ul>
              <a href="{% url 'agendar-cita' %}{{profesional.id}}" class="btn btn-dark">Pedir Cita</a>
              <a href="mailto:a22julioaa@iessanclemente.net" class="btn btn-dark">Contacta</a>
              <a href="https://www.github.com" target="_blank" class="btn btn-dark">Acerca de </a><br>
              <p class="mt-2">Precio Consulta: {{ profesional.precio_consulta }}€</p>
            </div>
          </div>
          <div class="col-4">
            <img src="{% static 'img/imagen-abogado.jpg' %}" class="card-img-top image-fluid"
              alt="Imagen de profesional">
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</section>

{% endif %}

{% endblock %}