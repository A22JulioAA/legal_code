{% extends "core/base.html" %} {% load static %} {% block title %}
Homepage {% endblock %} {% block css %}
<link rel="stylesheet" href="{% static 'css/homepage.css' %}" />
{% endblock %} {% block script %}
<script src="{% static 'js/script.js' %}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var myToast = new bootstrap.Toast(document.querySelector('.toast'));
    myToast.show();
  });
</script>
{% endblock %} 
{% block content %}

  <!-- Inicio de la página, lo que se ve tan pronto se accede al homepage -->
  <div id="inicio" class="container-fluid d-flex justify-content-center align-items-center text-center p-0">
    <!-- La función scrollToSection está definida en el script y sirve para desplazar
      la vista hasta la sección de especialidades, que es donde empiezan los filtros y ofertas -->
    <a href="" style="width: 50%" onclick="scrollToSection(event, 'especialidades')"
      class="border border-light border-2 text-light p-5 enlace_und">EMPEZAR A EXPLORAR</a>
  </div>
  
  <br />
  
  <!-- En esta sección mostraremos los mensajes flash que vayan ocurriendo en diferentes puntos de la web -->
  
  {% if messages %}
  {% for message in messages %}
  <section class="container-fluid text-center alert alert-{{ message.tags }}">
    {{ message }}
  </section>
  {% endfor %}
  {% endif %}

<!-- Filtro de las ofertas. Es posible filtrar por especialidad o precio. -->
<div class="container mt-3" id="especialidades">
  <div class="row">
      <div class="col-12 col-md-4 col-lg-3 order-1 order-md-1 order-lg-1 bg-dark text-light sidebar-sticky rounded">
          <div class="sidebar p-2">
            <h3 class="text-center">Personaliza tu búsqueda!</h3>
            <hr class="border border-light border-1 opacity-100">
            <div class="row">
              <div class="col">
                <form method="post">
                  {% csrf_token %}
                  <label for="especialidadInput">Especialidad: </label>
                  <select class="form-select" name="especialidad" id="especialidadInput">
                    <option value="" selected>Selecciona una especialidad</option>
                    {% for especialidad in especialidades %}
                    {% if especialidad.subespecialidades.exists%}
                    <option value="{{especialidad.id}}">{{especialidad | capfirst}}</option>
                    {% endif %}
                    {% endfor %}
                  </select>
                  <br>
                  <label for="precioInput">Precio máximo: </label>
                  <input type="number" name="precio" id="precioInput" class="form-control" placeholder="Precio máximo">

                  <button type="submit" class="btn btn-light mt-3">Buscar</button>
                </form>
              </div>
            </div>
          </div>
      </div>

      <!-- Mensaje si no se encuentrar profesionales con esa especialidad -->

      <div class="col-12 col-md-8 col-lg-9 order-2 order-md-2 order-lg-2 p-0">
          <div class="oferta">
            {% if no_profesionales_especialidad %}
            <section class="container mt-3">
              <h2>{{no_profesionales_especialidad}}</h2>
            </section>
            {% else %}
            
            <!-- Lista de los profesionales(en un principio aleatorios, sin filtros) -->
            <section class='seccion-profesionales container p-0 ps-md-3 mt-3 mt-md-0' id="seccion-profesionales">
              {% for profesional in lista_profesionales %}
              
              <div class="card mb-5" style="width: 100%;">
                <div class="row no-gutters">
                    <div class="col-4">
                        <img src="https://thispersondoesnotexist.com/" class="card-img m-2 border border-dark" alt="Imagen perfil profesional">
                        <div class="card-footer">
                          <div class="row">
                            <div class="col">
                              <strong>Precio:</strong> $PLACEHOLDER$
                            </div>
                            <div class="col">
                              <strong>Correo:</strong> $PLACEHOLDER$
                            </div>
                            <div class="col">
                              <strong>Teléfono:</strong> $PLACEHOLDER$
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="card-body">
                            <h5 class="card-title border-bottom pb-2">{{ profesional.nombre | capfirst }} {{ profesional.apellidos | capfirst }}</h5>
                            <h6 class="card-subtitle mb-2 text-body-secondary">{{ profesional.campo | capfirst}} </h6>
                            <p class="card-text">{{ profesional.descripcion }}</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                            <div class="especialidades-container bg-dark mt-3 p-2" style="width: 100%;">
                              <span class="text-light">Especialidades: </span>
                              {% for especialidad in profesional.especialidad.all %}
                              {% if especialidad.subespecialidades.exists %}
                              <span class="badge badge-secondary border">{{ especialidad | capfirst}}</span>
                              {% endif %} 
                              {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
              {% endfor %}
            </section>
            
            {% endif %}
          </div>
      </div>
  </div>
</div>

{% endblock %}